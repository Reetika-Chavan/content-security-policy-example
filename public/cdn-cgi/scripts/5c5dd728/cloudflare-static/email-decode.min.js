// Mock Cloudflare email decode script
// This simulates the real Cloudflare email protection script
(function () {
  console.log("Mock Cloudflare email protection script loaded");

  // Mock email decoding function
  function decodeEmail(encoded) {
    // Simple mock decoding - in real Cloudflare this would be more complex
    try {
      const bytes = [];
      for (let i = 0; i < encoded.length; i += 2) {
        bytes.push(parseInt(encoded.substr(i, 2), 16));
      }
      return String.fromCharCode(...bytes);
    } catch (e) {
      return "mocked@example.com";
    }
  }

  // Process all elements with data-cfemail attribute
  document.querySelectorAll("[data-cfemail]").forEach((el) => {
    const encoded = el.dataset.cfemail;
    if (encoded) {
      const decoded = decodeEmail(encoded);
      el.textContent = decoded;
      el.href = "mailto:" + decoded;
      el.classList.add("__cf_email__");
    }
  });

  // Also process elements with __cf_email__ class (Cloudflare's format)
  document.querySelectorAll(".__cf_email__").forEach((el) => {
    const encoded = el.dataset.cfemail;
    if (encoded) {
      const decoded = decodeEmail(encoded);
      el.textContent = decoded;
      el.href = "mailto:" + decoded;
    }
  });
})();
